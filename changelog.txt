# Wave changelog
v0.33.0 - 15 May 2023 
- Add support for AWS ECR public registry 
 
v0.32.2 - 13 May 2023 
- Bump base image nf-jdk:corretto-17.0.7 [275e3377]

v0.32.1 - 7 May 2023
- Fix pulls counters [d3156b23]

v0.32.0 - 7 May 2023
- Add wave & fusion prometheus counters [c8d55b87]

v0.31.1 - 3 May 2023
- Improve error handling for connection timeout [f2fbd39c]

v0.31.0 - 29 Apr 2023
- Add Conda and Spack file to build reports [b63fd2a1]
- Fix flaky test [63e361da]

v0.30.3 - 26 Apr 2023
- Fix OOM error when pulling layer blobs [f0653794]

v0.30.2 - aborted

v0.30.1 - 8 Apr 2023
- Rollback to default thread pools [4b422337]
- Bump Micronaut 3.8.8 [bc84bf5f]

v0.30.0 - 7 Apr 2023
- Add cacheable to tower client [2e0242d7]
- Refactor and cleanup [ff709edb]
- Reimplement PairingOutboundQueue [4834187a]
- Reimplement future store with redis atomic hash [55e63684]
- Improve queue naming [21114305]
- Use short random as msgId [84ea26ad]
- Strip protocol [558c9faf]
- Use completable future [15324cf3]
- Remove pairing connect check [24115400]

v0.29.6 - 6 Apr 2023 
- Offload proxy controller to IO executor [2800fbf7]
- Revert "Use send sync" [4a460691]
- Improve logging [151a633b]

v0.29.5 - 6 Apr 2023 
- Code cleanup [317a7666]
- Handle Websocket session closed exception [7fe3c5f5]
- Add Redis connection pool config [b8a35655]

v0.29.3/4 - 5 Apr 2023 
- Use list for future [51164817]

v0.29.2 - 5 Apr 2023 
- Use send sync [cbc47d5d]

v0.29.1 - 5 Apr 2023 
- Bump 10 thread for wave event loop [7b000a7e]
- Cleanup and refactoring [f8c8be3e]

v0.29.0 - 5 Apr 2023 
- Use polling over supplyAsync [4a1e336a]

v0.28.6 - 5 Apr 2023 
- Add consumers list [7d561f6d]
- Use singleton websocket instace [c0390502]
- Add custom MN worker pool [be3cbe78]
- Remove redis session [b23c7225]
- Improve logs [0f29cef7]
- Add CPUs info [30f1e999]

v0.28.5 - 4 Apr 2023 
- Add websocket sent log [0e7e9fd5]

v0.28.4 - 4 Apr 2023 
- Use websocket send async [bc136f55]

v0.28.3 - 4 Apr 2023 
- Use Redis hash for inbound futures [844f4f2e]

v0.28.2 - 4 Apr 2023 
- Improve future poll + refactor [53c6a335]

v0.28.1 - 4 Apr 2023 
- Fix missing timeout exeception on redis future [a9d640a0]
- Minor logging changes [c81e78bf] [4943ba6f] [6768b7eb]
- Update application dev [db4ae108]

v0.28.0 - 3 Apr 2023 
- Replace Redis pub/sub and stream with a list based approach [2af4fc01]
- Bump amazon corretto 17.0.6 [b6b6e0d0]

v0.27.2 - 1 Apr 2023
- Minor improvement on tower client [275d21b9]

v0.27.1 - 30 Mar 2023 
- Add Websocket pairing using Redis streams (#238) [0b2ed0cd]

v0.27.0 - 27 Mar 2023 
- Add Wave pairing via Websocket connection [f840fcdd]
- Bump build timeout to 15m [d2970fb5]

v0.26.8 - 22 Mar 2023
- Rename spack.yml to spack.yaml [9e67fdc7]

v0.26.7 - 22 Mar 2023
- Minor log change [da6cc096]
- Fix digest store checksum compute [de07254e]

v0.26.6 - 21 Mar 2023 
- Add digest checksum validation [284e12a]

v0.26.5 - 17 Mar 2023
- Resolve host for relative redirects [b09d4d7b]
- Minor log change [f36a2339]

v0.26.4 - 17 Mar 2023 
- Improve debugging [c0ee6e6]
- Fix docs [e148b307]

v0.26.3 - 15 Mar 2023 
- Revert "Block permanent failing pairing endpoints" [c55cd361]
- Add Mkdocs documentation  (#221) [1f777e76]
- Add Prometheus metrics percentiles [5d019a56]
- Remove JSON prettyPrint [ecaf4d8f]

v0.26.2 - 3 Mar 2023 
- Block permanent failing pairing endpoints [afbaa449]
- Fix Gitea Container registry auth [e732ba90]

v0.26.1 - 1 Mar 2023
- Relax retry on pairing connectivity check [ee4b133b]
- Block permanent failing pairing endpoints [afbaa449]

v0.26.0 - 26 Feb 2023
- Add Container request validation [20b63669]
- Add support for Spack file [81b5e282]
- Improve tests [e82fee2f] [850e8533]

v0.25.10 - 25 Feb 2023
- Improve request validation [696bdd48]
- Remove deprecated code [c59434cf]

v0.25.9 - 22 Feb 2023
- Fix pairing record lease (#222) [34332a4a]
- Improve error reporting [ac5e937a]

v0.25.8 - 22 Feb 2023
- Fix Azure registry auth [5fc3115e]

v0.25.7 - 21 Feb 2023
- Improve docker auth error reporting [eceffe85]
- Fix log typo [ci skip] [030dbc67]

v0.25.6 - 15 Feb 2023
- Add landing redirection [ede9a242]
- Fix Build rate limit message [c9aa73e6]
- Improve Registry auth error reporting [f327c3c9]
- Improve long response body [4c9fef41]
- Bump MN thread pool selection [c52393f6]
- Bump Groovy 3.0.15 [da793751]
- Bump to MN 3.8.4 [a98cc198]

v0.25.5 - 11 Feb 2023
- Fix unresolved container cache [f26dbbad]

v0.25.4 - 11 Feb 2023
- Fix issue when rendering layer config [4c10db9f]

v0.25.3 - 11 Feb 2023
- Minor change [31e66fa]

v0.25.2 - 10 Feb 2023
- Use fully qualified path for digest store [6bf0761a]
- Remove deprecated method [efdd4ffe]
- Add container tag path caching [a400e77a]
- Improve logging [e3f09ca8]

v0.25.1 - 8 Feb 2023
- Add expiration to container view [54bc8d99]
- Improve pairing keys lease (#218) [2b90612c]
- Strip container config data [28b84910]

v0.25.0 - 5 Feb 2023
- Add support for OCI image format [ec5d3792]
- Add Wave container requests store and introspection (#217) [77728a0f]
- Improve error handling and messages (#219) [eae43983] [b427989e]
- Fix pull of container with no name prefix [09122f73]
- Improve logging [33a99692]

v0.24.5 - 25 Jan 2023
- Remove deprecated class & rename package [7145c1f9]
- Improve logging & debugging [95431b72]

v0.24.4 - 23 Jan 2023
- Refactor Pairing service name [8c616e53]
- Task 212 213/improve tower client (#215) [d0d37d27]

v0.24.3 - 19 Jan 2023
- Improve error reporting [56ccbc12]

v0.24.2 - 18 Jan 2023
- Patching invalid workspaceId concatenation [87bb7602]
- Improve logging [9b22960c]

v0.24.1 - 17 Jan 2023
- Fix missing tower endpoint URL for old client [7c408d7e]
- Remove unused tower environment file [981154bf]

v0.24.0 - 17 Jan 2023
- Add support for Tower credentials API in place of DB connection

v0.23.7 - 23 Dec 2022
- Fix download failed issue caused by relative redirect path [65d7d03d]
- Refactor tests [2016664f]

v0.23.6 - 21 Dec 2022
- Fix AWS ECR auth service [fce102ab]

v0.23.5 - 9 Dec 2022
- Fix Kaniko compressed-caching flag [1c04155c]

v0.23.4 - 8 Dec 
- Allow the use of SHA256 container names [afd36305]

v0.23.3 - 3 Dec 2022
- Fix duration deserialisation [19d9af71]

v0.23.2 - 3 Dec 2022
- Fix Invalid config for augmented container [bb5b9673]

v0.23.1 - 26 Nov 2022
- Add HttpClient retry strategy [bd49d1ff]
- Make http client timeout configurable [0535086f]
- Improve container platform handling [225095f2]

v0.23.0 - 22 Nov 2022
- Add persistence service (#163) [993ad158]
- Add view first iteration (#187) [2d5ca749]
- Add cacheable + retryable for isManifestPresent (#191) [672fb972]
- Fix support for Singularity container engine (#202) [46a8d76d]
- Fix stop redis in every test (#184) [473a2c74]
- Improve visualization for builds (#197) [68a379d3]
- Upgrade github actions to v3 (#196) [f30c75ff]
- Remove fixed registry configurations (#192) [697aa5f7]
- Multi platform build (#125) [1f0f8f86]
- Use jedis instead jedispool in tests (#188) [22fb80cb]
- Bump gradle 7.5.1 [a9be6272]
- Bump Java 17 + groovy 3.0.13 + MN 3.7.3 [05810ac2]
- Bump cr.seqera.io/public/nf-jdk:corretto-17.0.5 as base image [eeb9301a]

v0.22.4 - 26 Oct 2022
- Update readme [614c8143] <Paolo Di Tommaso>
- Fix Docker config.json mount in K8s [5e5a67f7] <Paolo Di Tommaso>

v0.22.3 - 26 Oct 2022
- Allow empty K8s storageClaim [4f6d7e69] <Paolo Di Tommaso>
- wait for redis testcontainer is ready (#181) [08d2b0ed] <Jorge Aguilera>
- Remove the use of the init container (#180) [b77aabca] <Jorge Aguilera>

v0.22.2 - 24 Oct 2022
- Bump dev build repository [f9131b70] 
- Enable redis pool configuration + Bump Micronaut 3.7.2 (#179) [d8d9ca04]
- Improve date fmt [4af6376f]

v0.22.1 - 23 Oct 2022
- Revert to MN 3.3.4 [db0e6fc3]

v0.22.0 - 23 Oct 2022 
- Improve build cache for failed builds (#176) [41972309]
- Improve the time format in the completion email (#169) [84357efe]
- Make Tower user auth async (#166) [55f06451] <Jorge Aguilera>
- Check if target image exist before building a new one (#173) [78a5fa2e]
- Add basic k8s deployment [ci skip] [6c81171a]
- Update ngrok launcher script [e72979ce]
- Bump Micronaut 3.7.2 (#174) [28172705] 
- Bump kaniko 1.9.1 (#175) [8bb72c47]
- Bump base image seqera-labs/nf-jdk:corretto-17.0.5 [85921df3] 

v0.21.7 - 18 Oct 2022 
- Switch to quay.io/seqeralabs/nf-jdk:corretto-17.0.4 as base image 
 
v0.21.6 - 17 Oct 2022 [BROKEN BASE IMAGE]
- Improve registry auth lookup error [0f696146] 

v0.21.5 - 4 Oct 2022
- Rollback timestamp and fingerpint fields [466b3a46] <Paolo Di Tommaso>

v0.21.4 - 3 Oct 2022
- Count all manifest digest requests [02435bff] <Paolo Di Tommaso>
- Add timestamp + fingerprint to request [5ccc08bd] <Paolo Di Tommaso>
- Test on Java 17 [9085d00d] <Paolo Di Tommaso>
- Update changelog [a823eb6d] <Paolo Di Tommaso>

v0.21.3 - 1 Oct 2022
- [release] 0.21.3 [c028de57] <Paolo Di Tommaso>
- Fix test [80ee2fba] <Paolo Di Tommaso>
- Improve slow down error message [0e8adfcc] <Paolo Di Tommaso>
- Improve logging [1342a1fd] <Paolo Di Tommaso>
- Rename ContainerScanner to ContainerAugmenter [65029477] <Paolo Di Tommaso>
- Parse token body only when status code is 200 (#164) [5a66a7d1] <Jorge Aguilera>

v0.21.2 - 29 Sep 2022
- Add new get direct response in proxyclient (#162) [cb49c475]
- Add test for user info (#161) [c199ed41]
- Add proxy client trace response [ef3c78e3]
- Refactor Tower client using Java http client [f891e825]

v0.21.1 - 27 Sep 2022
- Add support for Tower user auth [a62c6836]

v0.21.0 - 27 Sep 2022
- Bump nf-jdk:corretto-17.0.4 as base image [fbabf800]
- Fix Disable discovery client caching and re enable prometheus config (#156) [d94e391a]
- Add support for google artifact registry (#157) [468ed9e7]

v0.20.3 - 26 Sep 2022
- Add build clean setting  [55b83101]
- Add compress caching build option [ba4b788b]
- Add support for pod resources [359743aa]

v0.20.2 - 26 Sep 2022 
- Minor change object ser-deser [e7796e87]
- Duplicate host name in the creds file [43827fff]
- Rename CacheStore to BuildStore [80a12ce5]

v0.20.1 - 25 Sep 2022 
- Fix synchronisation for distributed build [e227bdf1]
- Add versioned redis keys [80ec83b2]

v0.20.0 - 24 Sep 2022 
- Add manifest/blob caching via redis 
- Improve error reporting when missing auth token [d0e4ce61] 

v0.19.4 - 24 Sep 2022 
- Revert "notask: adds monitoring endpoint for prometheus (#147)" 

v0.19.3 - 23 Sep 2022 
- Change redis prefix [9933542b]

v0.19.2 - 23 Sep 2022 
- Use column prefix keys for redis [e9b39cbc]

v0.19.1 - 23 Sep 2022
- Adds prometheus configuration for monitoring [cb28d80]

v0.19.0 - 22 Sep 2022 
- Refactor config json moving into request [554bdd9a]
- render build timeout exception using docker format (#143) [3d98d9b6]
- improve ratelimit test (#142) [e5f54067]
- prefix objects store in redis (#141) [371541e3]
- return a clear error message when rate limit is hit (#138) [b188e156]

v0.18.1 - 19 Sep 2022 
- Fix wave debug option [a72d97e5]
- Fix build invalid timeout interval [2dace3ed]

v0.18.0 - 19 Sep 2022
- Add support for workspace credentials + fix docker push [7850a2f1]
- Fix user attributes lazy loading [c8f692fb]
- Bump mysql driver for testing [f0ddf36d]

v0.17.1 - 17 Sep 2022
- Add user to completion email [2e45eee7]
- Remove equals annotation from User [853513af]

v0.17.0 - 16 Sep 2022
- Build cache storage (#129) [d007184d]
- Add different rate limit for auths or anonymous requests [99372a3a]

v0.16.0 - 14 Sep 2022 
- Improve scalability adding blob response redirection [4e50a0e3]

v0.15.2 - 12 Sep 2022 
- Add toString to domain objects [0169d508]
- Improve K8s log info [da473fdf]
- Add rate limit logic to test controller [7fe31c31]

v0.15.1 - 11 Sep 2022
- Fix tower table names case [256c0b65]

v0.15.0 - 10 Sep 2022
- Fix build workdir cleanup [ed60079e]
- Refactor util classes [1dddae50]
- feature: add rate limiter for pull request (#120) [6ffdbd39]
- Add external storage for token caching (#115) (#122) [dcc370ee]
- bugfix: activate storage factory in rate-limit (#121) [c0f8cc69]
- feature: rate limit for builds (#114) [00b71823]
- feature: specify node-selector and service-account (#118) (#119) [d93b0cc0]
- Improve error handling [28e491a9]
- Allow customs labels for build pod (#117) [6841bca8]

v0.14.2 - 7 Sep 2022
- Return an actionable error on invalid path

v0.14.1 - 5 Sep 2022
- Fix registry auth invalid cache key [15bd1a57]
- Fix retry policy for temportary IO exeception [15e2723f]
- Add support for Azure CR [cac5b661]
- Improve logging [7af3109f]

v0.14.0 - 3 Sep 2022
- Add support for non x86/amd64 architecture #109 [06c7087b]
- Add support for custom build and cache repos [68dfc6dd]
- Allow the build with private repositories [bd3a41b7]
- Improve container platform handling [d5989cde]
- Improve validation [49f001b6]
- Fix history v1 rewrite for multi-layers config [ce799deb]
- Fix init-container optional if no creds provided (#103) [f64c2636]
- Remove build pack artifacts (#101) [b4f827f0]
- Remove unused field [00fb321a]
- Bump kaniko v1.9.0 [56c4ee63]

v0.13.1 - 23 Aug 2022
- Improve build mail notification [fcb88794]
- Rename RouteHelper to RouteHandler [6d5652ee]

v0.13.0 - 17 Aug 2022
- Use CompletableFuture instead Future to listen progress in the task (#98) [e74194c6]
- Remove custom base image [c20ce89f]
- Add unique job id [147cfe6a]
- Refactor pod build [085397b4]

v0.12.0 - 16 Aug 2022
- Add support for Kubernetes based image build [3294a334]
- Add support for creds file [2093d907]
- Add support for build PV claim [b870b43c]
- Improve error handling and reporting (#95) [50c0b5f5]
- Improve logging and debugging [73ff8714]
- Fix issue resolving cached manifest [5e73892f]
- Minor changes [9a15e864]

v0.11.1 - 9 Aug 2022
- Fix build duration format

v0.11.0 - 6 Aug 2022
- Add config setting for storage cache [e6d3d33d]
- Improve unit tests for manifest and blob cache [70ba6886]
- Improve config [9b8e3d46]
- Add support for mail notification [7e862bc8]
- Update wave.build.repo config [d3e5ca61]
- Add support for AWS params store [29e2a89b]

v0.10.3 - 5 Aug 2022
- Fix missing cache annotation [c56f4d9b]

v0.10.2 - 5 Aug 2022
- Make container token configurable [03f91737]
- Increase token expire time. Log missing token requests. (#80) [f734678a]
- Increase build timeout to 5 mins [7b887614]
- Bump wave/kaniko:0.1.1 as build image [0275f872]
- Add support for build cache [829b68f8]
- Add support for conda file [839eb973]
- Bump base image 0.1.0 [f39f5449]
- Minor change [b12aed90]

v0.10.1 -31 Jul 2022
- Config changes [9373f51c]

v0.10.0 - 27 Jul 2022
- Add support for container build [8ce16792]
- feature: allow mysql or h2 via env configuration (#77) [8c2c692a]
- Use WAVE_ENDPOINT variable as server URL (#75) [61485da7]

v0.9.1 - 3 Jul 2022
d221290b - Fix launcher main class (5 weeks ago) <Paolo Di Tommaso>

v0.9.0 - 3 Jul 2022
- Modularise project structure [087e3bbd]
- Add container injection via external layers [a4a03adb]
- Refactor package structure [6c9a62a7]
- Add ability to access private registry using tower creds [47347c9a]
- Registry authorisation & credentials refactor (#71) [546d73b9]

v0.8.0 - 22 Jun 2022
- Use geesefs as fuse driver [0a5c61c4]
- Improve tag & build script [534474b4]
- Use WAVE_ prefix for env vars [b6326847]
- Bump Wave project name [0111df4e]
- Add service info [d681861b]
- feature: initial documentation (#66) [8b7d0e71]

v0.7.1 - 7 Apr 2022
- Improve entrypoint [89a7a382]

v0.7.0 - 7 Apr 2022

v0.7.1 - 2022-04-07

v0.7.0 - 2022-04-07

v0.6.14-ISC - 2022-05-28

v0.6.15-juice - 2022-04-16

v0.6.14-juice - 2022-04-16

v0.6.14 - 2022-04-10

v0.6.13 - 2022-04-06

v0.6.10 - 2022-04-06

v0.6.9 - 2022-04-05

v0.6.8 - 2022-04-05

v0.6.7 - 2022-04-04

v0.6.6 - 2022-04-04

v0.6.5 - 2022-04-04

v0.6.4 - 2022-04-03

v0.6.3 - 2022-04-03

v0.6.2 - 2022-04-03

v0.6.1 - 2022-04-03

v0.6.0 - 2022-04-02

v0.5.4 - 2022-03-30

v0.5.3 - 2022-03-29

v0.5.2 - 2022-03-29

v0.5.1 - 2022-03-26

v0.4.8 - 2022-03-16

v0.4.7 - 2022-03-05

v0.4.6 - 2022-03-05

v0.4.5 - 2022-03-04

v0.4.4 - 2022-03-04

v0.4.3 - 2022-03-01

v0.4.2 - 2022-02-27

v0.4.1 - 2022-02-27

v0.4.0 - 2022-02-27

v0.3 - 2022-02-18

v0.2 - 2022-02-12
