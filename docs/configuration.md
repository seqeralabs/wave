---
title: Configuration reference
tags: [configuration, reference, wave]
---

This page documents configuration options for self-hosted Wave deployments.
If you are using Wave as a service, these configuration options do not apply to your setup.

Configure Wave by setting YAML values in the [`config.yml`](https://github.com/seqeralabs/wave/blob/master/config.yml) configuration file:

```yml
wave:
    mail:
        from: "wave-app@seqera.io"
```

Configuration paths in this reference use dot notation to represent nested YAML keys. In the example above, the `from` value nested under the `mail` section is referenced as `wave.mail.from`.

You can configure Wave using either the `config.yml` file or environment variables. Environment variables are provided where available, though not all configuration options support them.

## General

Configure general Wave application settings, such as application name, port, anonymous access permissions, and platform URLs with the following options:

`tower.endpoint.url` *(optional)*
: The URL pointing to the Seqera platform API service (default: [`https://api.cloud.seqera.io`](https://api.cloud.seqera.io)).
  Can be set using the `${TOWER_ENDPOINT_URL}` environment variable.

`wave.allowAnonymous` *(required)*
: Whether to allow anonymous access to the Wave server without authentication (default: `false`).
: Modify this option based on your security requirements.

`wave.denyPaths` *(optional)*
: Filter out API calls for specific artifacts, like manifests, that don't exist.

`wave.server.url` *(required)*
: The URL for the Wave server.
  Can be set using the `${WAVE_SERVER_URL}` environment variable.

`wave.tokens.cache.duration` *(optional)*
: The duration for cached tokens generated by Wave (default: `1h`).

## Container registry

Wave uses the generic format `wave.registries.<REGISTRY_NAME>.username` and `wave.registries.<REGISTRY_NAME>.password` for registry authentication.
You must specify all repositories used in your Wave installation.

The examples below show standard formats for known registries, but you can customize the registry name (for example, change `azurecr.io` to `seqeralabs.azurecr.io`).

:::note
You can also define container registry credentials in the [`config.yml`](https://github.com/seqeralabs/wave/blob/master/config.yml) file.
These configurations enable Wave authentication for repositories used to push or pull artifacts.
:::

Configure container registry authentication with the following options:

`wave.registries.<AWS_ECR_REPO_NAME>.password` *(optional)*
: The AWS ECR password for authentication.
  For example: `195996028523.dkr.ecr.eu-west-1.amazonaws.com`.
  Can be set using the `${AWS_SECRET_ACCESS_KEY}` environment variable.

`wave.registries.<AWS_ECR_REPO_NAME>.username` *(optional)*
: The AWS ECR username for authentication.
  For example, `195996028523.dkr.ecr.eu-west-1.amazonaws.com`.
  Can be set using the `${AWS_ACCESS_KEY_ID}` environment variable.

`wave.registries.default` *(optional)*
: The default container registry for Wave (default: `docker.io`).

`wave.registries.docker.io.password` *(optional)*
: The Docker Hub password or PAT (Personal Access Token) for authentication.
  Can be set using the `${DOCKER_PAT}` environment variable.

`wave.registries.docker.io.username` *(optional)*
: The Docker Hub username for authentication.
  Can be set using the `${DOCKER_USER}` environment variable.

`wave.registries.quay.io.password` *(optional)*
: The Quay.io password or PAT for authentication.
  Can be set using the `${QUAY_PAT}` environment variable.

`wave.registries.quay.io.username` *(optional)*
: The Quay.io username for authentication.
  Can be set using the `${QUAY_USER}` environment variable.

## HTTP client

Configure the HTTP client with the following options:

`wave.httpclient.connectTimeout` *(optional)*
: The connection timeout for the HTTP client (default: `20s`).

`wave.httpclient.retry.attempts` *(optional)*
: The number of HTTP client retry attempts (default: `5`).

`wave.httpclient.retry.delay` *(optional)*
: The delay for HTTP client retries (default: `1s`).

`wave.httpclient.retry.jitter` *(optional)*
: The jitter for HTTP client retries (default: `0.25`).

`wave.httpclient.retry.maxDelay` *(optional)*
: The maximum delay for HTTP client retries.

`wave.httpclient.retry.multiplier` *(optional)*
: The multiplier for HTTP client retries (default: `1.0`).

## Container build process

Configure how Wave builds container images and manages associated logs for monitoring, troubleshooting, and delivery with the following options:

`wave.build.buildkit-image` *(required)*
: The [Buildkit](https://github.com/moby/buildkit) container image used in the Wave build process (default: `moby/buildkit:v0.13.2-rootless`).

`wave.build.cache` *(required)*
: The container repository used to cache layers of images built by Wave.

`wave.build.cleanup` *(optional)*
: The cleanup strategy for after the build process.
  For example, set to `OnSuccess` for cleanup only if a build is successful.

`wave.build.compression` *(optional)*
: The compression type to be applied to cache layers (default: `gzip`).
  Options include: `uncompressed`,`estargz`, and `zstd`.

`wave.build.force-compression` *(optional)*
: Whether to force compression for all cache layers produced by the build process (default: `false`).

`wave.build.oci-mediatypes` *(optional)*
: Whether to use OCI media types in exported container manifests (default: `true`).

`wave.build.public-repo` *(optional)*
: The public repository for the container images built by Wave.
  Wave uses this repository when you freeze container images without specifying `wave.build.repo`.
  When not configured, you must specify `wave.build.repo` for freeze mode operations.

`wave.build.repo` *(required)*
: The Docker container repository for the container images built by Wave.

`wave.build.singularity-image` *(optional)*
: The [Singularity](https://quay.io/repository/singularity/singularity?tab=tags) image used in the build process (default: `quay.io/singularity/singularity:v3.11.4-slim`).

`wave.build.singularity-image-arm64` *(optional)*
: The ARM64 version of the Singularity image for the build process (default: `quay.io/singularity/singularity:v3.11.4-slim-arm64`).

`wave.build.status.delay` *(optional)*
: The delay between build status checks (default: `5s`).

`wave.build.status.duration` *(optional)*
: The duration for build status checks (default: `1d`).

`wave.build.timeout` *(optional)*
: The maximum duration for the build process (default: `5m`).

`wave.build.trusted-timeout` *(optional)*
: The maximum duration for the build process for authenticated users when freeze mode is enabled (default: `10m`).
  If set to less than `wave.build.timeout`, the longer `wave.build.timeout` value is used.

`wave.build.workspace` *(required)*
: The path to the directory used by Wave to store artifacts such as Containerfiles, Trivy cache for scan, Buildkit context, and authentication configuration files.
  For example, `/efs/wave/build`.

### Build process logs

Configure how Wave stores and delivers build logs from containers and Kubernetes pods, which can be retrieved later or included in build completion emails, with the following options:

`wave.build.locks.path` *(required)*
: The path inside `wave.build.logs.bucket` where Wave will store conda lock files.

`wave.build.logs.bucket` *(required)*
: The AWS S3 bucket where Wave will store build process logs.

`wave.build.logs.maxLength` *(optional)*
: The maximum number of bytes that can be read from a log file. If a log file exceeds this limit, it will be truncated (default: `100000` (100 KB)).

`wave.build.logs.path` *(required)*
: The path inside `wave.build.logs.bucket` where Wave will store build logs.

`wave.build.logs.prefix` *(optional)*
: The prefix for build process log files in the specified S3 bucket.

### Kubernetes container build process

Configure Kubernetes-specific settings for Wave, where build and scan processes share most configurations except for CPU and memory requirements, with the following options:

`wave.build.k8s.labels` *(optional)*
: The labels on Wave build Kubernetes pods.

`wave.build.k8s.namespace` *(required)*
: The Kubernetes namespace where Wave will run its build pods.

`wave.build.k8s.node-selector` *(optional)*
: The node selector for Wave build Kubernetes pods.

`wave.build.k8s.resources.requests.cpu` *(optional)*
: The [CPU resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) to allocate to Wave build processes.
  For example, set to `2` (2 CPU cores) or `1500Mi` (1.5 CPU cores).

`wave.build.k8s.resources.requests.memory` *(optional)*
: The [memory resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) to allocate to Wave build processes.
  For example, set to `3Gi` (3 Gigabytes) or `2000Mi` (2000 Megabytes).

`wave.build.k8s.service-account` *(optional)*
: The Kubernetes service account name to be used by Wave build pods.

`wave.build.k8s.storage.claimName` *(optional)*
: The volume claim name for the Wave build Kubernetes pods.

`wave.build.k8s.storage.mountPath` *(optional)*
: The volume mount path on Wave build Kubernetes pods.

## Container scan process

Configure how Wave's vulnerability scanning process uses a [Trivy docker image](https://hub.docker.com/r/aquasec/trivy) with customizable tags and severity levels with the following options:

`wave.scan.enabled` *(optional)*
: Whether to enable vulnerability scanning for container images (default: `true`).

`wave.scan.image.name` Â *(optional)*
: The [Trivy docker image](https://hub.docker.com/r/aquasec/trivy) to use for container security scanning (default: `aquasec/trivy:0.47.0`).

`wave.scan.reports.path` *(required)*
: The path inside the S3 bucket where Wave will store SBOM reports.
  For example, `s3://wave-store/scan-reports`.

`wave.scan.severity` *(optional)*
: The [severity levels](https://aquasecurity.github.io/trivy/v0.22.0/vulnerability/examples/filter/) reported in vulnerability scanning.
: Options include: `MEDIUM`,`HIGH`, and `CRITICAL`.

### Kubernetes Wave scan process

Configure Wave scanning process resource requirements for Kubernetes deployments with the following options:

`wave.scan.k8s.resources.requests.cpu` *(optional)*
: The amount of [CPU resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) allocated to Wave scan processes.
  For example, set to `2` (2 CPU cores) or `1500Mi` (1.5 CPU cores).

`wave.scan.k8s.resources.requests.memory` *(optional)*
: The [memory resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) allocated to Wave scan processes.
  For example, set to `3Gi` (3 Gigabytes) or `2000Mi` (2000 Megabytes).

## Rate limits

Configure how Wave controls rate limits for anonymous and authenticated user access with the following options:

`rate-limit.build.anonymous` *(required)*
: The rate limit for build requests from anonymous users (default: 25 build requests per day (`25/1d`); max: 25).

`rate-limit.build.authenticated` *(required)*
: The rate limit for build requests from authenticated users (default: 100 build requests per hour (`100/1h`); max: 100).

`rate-limit.pull.anonymous` *(required)*
: The rate limit for anonymous pull requests from anonymous users (default: 250 pull requests per hour (`250/1h`); max: 250).

`rate-limit.pull.authenticated` *(required)*
: The rate limit for authenticated pull requests from authenticated users (default: 2k pull requests per minute (`2000/1m`); max: 2k).

## Database and cache

Wave uses external database and caching services to store application data and improve performance.

### Redis

Configure Redis with the following options:

`redis.client.timeout` *(optional)*
: The timeout duration (in milliseconds) for Redis client operations (default: `5000` (5 seconds)).

`redis.password` *(optional)*
: The password to authenticate with the Redis server.
  Can be set using the `${REDIS_PASSWORD}` environment variable.

`redis.pool.enabled` *(optional)*
: Whether to enable the Redis pool (default: `true`).

`redis.pool.maxIdle` *(optional)*
: The maximum number of idle connections maintained in the Redis connection pool (default: `10`).

`redis.pool.maxTotal` *(optional)*
: The maximum number of connections maintained in the Redis connection pool (default: `50`).

`redis.pool.minIdle` *(optional)*
: The minimum number of idle connections maintained in the Redis connection pool (default: `0`).

`redis.uri` *(required)*
: The URI for connecting to Redis (default format: `redis://${REDIS_HOST:redis}:${REDIS_PORT:6379}`).
  Can be set using the `${REDIS_URI}` environment variable.

### PostgreSQL

Configure PostgreSQL with the following options:

`wave.db.password` *(required)*
: The password for the PostgreSQL database user.
  Can be set using the `${WAVE_DB_PASSWORD}` environment variable.

`wave.db.uri` *(required)*
: The JDBC connection string for the PostgreSQL database.
  For example, `jdbc:postgresql://localhost:5432/wave`.
  Can be set using the `${WAVE_DB_URI}` environment variable.

`wave.db.user` *(required)*
: The username for authenticating with the PostgreSQL database.
  Can be set using the `${WAVE_DB_USER}` environment variable.

## Blob cache

Configure how Wave caches container blobs to improve client performance and optionally delegates transfer tasks to Kubernetes pods for scalability with the following options:

`wave.blobCache.baseUrl`Â *(optional)*
: The URL, which will override the base URL (part of URL before the blob path) of blobs sent to the end client.

`wave.blobCache.cloudflare.lifetime` *(optional)*
: The validity of the Cloudflare WAF token.

`wave.blobCache.cloudflare.secret-key` *(optional)*
: The [Cloudflare secret](https://developers.cloudflare.com/waf/custom-rules/use-cases/configure-token-authentication/) to create the WAF token.

`wave.blobCache.cloudflare.urlSignatureDuration` *(optional)*
: The validity duration of the AWS S3 URL signature (default: `30m`).

`wave.blobCache.enabled` *(optional)*
: Enables the blob cache (default: `false`).

`wave.blobCache.requestsCpu` *(optional)*
: The amount of [CPU resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) allocated to the k8s pod used for blob binary transfers.

`wave.blobCache.requestsMemory` *(optional)*
: The [memory resources](https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/#resource-units-in-kubernetes) allocated to the k8s pod used for blob binary transfers.

`wave.blobCache.s5cmdImage` *(optional)*
: The container image that supplies the [s5cmd tool](https://github.com/peak/s5cmd) to upload blob binaries to the S3 bucket (default: `public.cr.seqera.io/wave/s5cmd:v2.2.2`).

`wave.blobCache.signing-strategy`Â *(optional)*
: The URL signing strategy for different services.
  Currently supports AWS S3 and Cloudflare service.
  Options include: `aws-presigned-url` and `cloudflare-waf-token`.

`wave.blobCache.status.delay` *(optional)*
: The time delay in checking the status of the transfer of the blob binary from the repository to the cache (default: `5s`).

`wave.blobCache.status.duration` *(optional)*
: The time for which Wave will store the blob binary in cache (default: `5d`).

`wave.blobCache.storage.accessKey` *(optional)*
: The access key (part of credentials) to access the resources of the service used for caching.

`wave.blobCache.storage.bucket` *(required)*
: The name of Cloudflare or S3 bucket.
  For example, `s3://wave-blob-cache`.

`wave.blobCache.storage.endpoint` *(optional)*
: The URL for the storage location for the download or upload of blob binaries.

`wave.blobCache.storage.region` *(required)*
: The AWS region where the bucket is created.

`wave.blobCache.storage.secretKey` *(optional)*
: The secret key (part of credentials) to access the resources of the service used for caching.

`wave.blobCache.timeout`Â *(optional)*
: The timeout for blob binary transfer, after which Wave will throw a `TransferTimeoutException` exception (default: `5m`).

## Email configuration

Configure how Wave sends email notifications on behalf of the service with the following options:

`mail.from` *(required)*
: The sender's email address for Wave notifications.
  Can be set using the `${MAIL_FROM}` environment variable.

## Metrics

Configure how Wave Metrics service provides data about container builds and pulls per organization and date with the following options:

`wave.metrics.enabled` *(optional)*
: Whether to enable Wave application metrics collection and exposure (default: `false`).

## Accounts

Configure user credentials for accessing authenticated Wave APIs and services with the following options:

`wave.accounts` *(required)*
: The list of credentials to access authenticated Wave APIs like metrics APIs.
  Format of the credential list: `- <USERNAME>:<PASSWORD_CHECKSUM>`

